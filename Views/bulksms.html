<!DOCTYPE html>
<html lang="en">
<style>
  .dH{
    float: left;
  }
  .aside-logo {
            display: flex;
            align-items: center; /* Align items vertically */
            gap: 12px; /* Space between logo and text */
            padding: 10px;
            position: relative;
        }
      
        /* Logo image styling */
        .logo-image {
            max-width: 100%;
            height: auto;
            width: auto;
            border-radius: 8px; /* Optional: Rounded corners */
            transition: background-color 0.3s ease, filter 0.3s ease; /* Smooth transition */
        }
      
        /* Default (Light Mode) Styles */
        body {
            background-color: #fff; /* Default light background */
            color: #000;
        }
      
        .logo-image {
            background-color: #000; /* Dark background for light mode */
            filter: invert(0); /* Ensure logo stays normal */
        }
      
        /* Dark Mode Styles */
        @media (prefers-color-scheme: dark) {
            body {
                background-color: #1a1a1a; /* Dark background for dark mode */
                color: #fff;
            }
      
            .logo-image {
                background-color: #fff; /* Light background for dark mode */
                filter: invert(1); /* Optional: Invert logo color for contrast */
            }
        }
      
        /* Responsive font size for logo name */
        .logo-name {
            font-size: calc(1.8rem + 1vw);
            margin: 0;
            font-weight: bold;
            line-height: 1.2;
            text-align: left;
        }
      
        /* Adjustments for smaller screens */
        @media (max-width: 768px) {
            .logo-image {
                max-width: 50px;
            }
      
            .logo-name {
                font-size: 1.5rem;
            }
        }
      
        @media (min-width: 769px) and (max-width: 1199px) {
            .logo-image {
                max-width: 60px;
            }
      
            .logo-name {
                font-size: 2rem;
            }
        }
      
        @media (min-width: 1200px) {
            .logo-image {
                max-width: 80px;
            }
      
            .logo-name {
                font-size: 2.5rem;
            }
        }
      
        /* Sidebar text styling */
        .sidebar-text {
            display: flex;
            align-items: center;
            text-align: left;
        }


        .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        .form-group label {
            margin-right: 10px;
        }
        select, textarea, button {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
        select {
            margin-right: 10px;
        }
        textarea {
            resize: none;
            margin-right: 10px;
        }
        button {
            background-color: #28a745;
            color: #fff;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #218838;
        }
        .large-textarea {
            width: 100%;
            margin-top: 15px;
        }
</style>
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Datastream-Send</title>

      <!--Bootstrap icons-->
      <link href="/assets/fonts/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">

      <!--Google web fonts-->
      <script src="https://kit.fontawesome.com/1f48a0d62b.js" crossorigin="anonymous"></script>
      <link rel="preconnect" href="https://fonts.googleapis.com">
      <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:ital@0;1&family=Open+Sans:wght@300..800&display=swap" rel="stylesheet">
      <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@48,400,0,0" />
  <!--Simplebar css-->
  <link rel="stylesheet" href="/assets/vendor/css/simplebar.min.css">
  <!--Choices css-->
  <link rel="stylesheet" href="/assets/vendor/css/choices.min.css">

  <!--Date range picker-->
  <link rel="stylesheet" href="/assets/vendor/css/daterangepicker.css">
  <!--Main style-->
  <link rel="stylesheet" href="/assets/css/style.min.css">

</head>

<body>
<div class="loader bg-gradient-primary text-white">
      <div
              class="content flex-column p-4 pb-0 d-flex justify-content-center align-items-center flex-column-fluid position-relative">
              <div class="w-100 h-100 position-relative d-flex align-items-center justify-content-center">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader spinner-grow  me-2"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>
              <div>
<!--////////////////// PreLoader Start//////////////////////-->
<div class="loader bg-gradient-primary text-white">
  <!--Placeholder animated layout for preloader-->
  <div class="d-flex flex-column flex-root">
    <div class="page d-flex flex-row flex-column-fluid">
      <div class="page-content ps-0 ms-0 d-flex flex-column flex-row-fluid">
        <div
          class="content flex-column p-4 pb-0 d-flex justify-content-center align-items-center flex-column-fluid position-relative">
          <div class="w-100 h-100 position-relative d-flex align-items-center justify-content-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader anim-spinner me-2"><line x1="12" y1="2" x2="12" y2="6"/><line x1="12" y1="18" x2="12" y2="22"/><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"/><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"/><line x1="2" y1="12" x2="6" y2="12"/><line x1="18" y1="12" x2="22" y2="12"/><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"/><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"/></svg>
          <div>
            <span>Loading...</span>
          </div>
        </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!--////////////////// /.PreLoader END//////////////////////-->

              </div>
            </div>
            </div>
    </div>
    <!--////////////////// /.PreLoader END//////////////////////-->


  <div class="d-flex flex-column flex-root">
    <!--Page-->
    <div class="page d-flex flex-row flex-column-fluid">


      <!--///////////Page sidebar begin///////////////-->
      <aside class="page-sidebar">
        <div class="h-100 flex-column d-flex justify-content-start">

          <!--Aside-logo-->
 <!-- Aside-logo -->
 <div class="aside-logo d-flex flex-shrink-0 justify-content-start position-relative dH">
  <a href="/" class="d-block">
      <div class="d-flex flex-no-wrap text-truncate">
          <!-- Sidebar-icon -->
          <span class="sidebar-text d-flex justify-content-start">
              <!-- Sidebar-text -->
              <div class="d-flex align-items-center"> <!-- Align items vertically -->
                  <span class="d-flex justify-content-start mx-4" id="myDIVA"  style="height: 80%;width: 80%;">
                      <img src="/assets/media/WPcodersProfileu.png" alt="Logo" class="logo-image">
                  </span>
                  <span id="myDIV">
                  <p class="fs-4 fw-bold mb-0 logo-name"> <!-- Added mb-0 to remove bottom margin -->
                      Datastream <br> Send
                  </p>
              </span>
              </div>
          </span>
      </div>
  </a>
</div>              

          <div class="aside-menu px-3" data-simplebar>
            <nav class="flex-grow-1 h-100" id="page-navbar">
              <!--:Sidebar nav-->
              <ul class="nav flex-column collapse-group collapse d-flex">
                  <li class="nav-item pt-4">
                      <a href="/" class="nav-link d-flex align-items-center text-truncate">
                        <span class="sidebar-icon">
                          <span class="material-symbols-rounded">
                            sell
                            </span>
                        </span>
                        <!--Sidebar nav text-->
                        <span class="sidebar-text">Dashboard</span>
                      </a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link d-flex align-items-center" href="Other/#multi-leveler" data-bs-toggle="collapse" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="sidebar-icon">
                            <span class="material-symbols-rounded">
                              layers
                              </span>
                          </span>
                          <span class="sidebar-text">SMS</span>
                        </div>
                      </a>
                 
            <ul id="multi-leveler" class="collapse sidebar-dropdown list-unstyled mb-0">
              <li class="nav-item pt-1">
                  <a href="/SMS"
                  class="nav-link d-flex align-items-center text-truncate ">
                  <span class="sidebar-icon">
                  <span class="material-symbols-rounded">
                  chat
                  </span>
                  </span>
                  <span class="sidebar-text">Quick SMS</span>
                  </a>
                  </li>
              <li class="nav-item pt-1">
            <a href="/bulksms"
            class="nav-link d-flex align-items-center text-truncate ">
            <span class="sidebar-icon">
            <span class="material-symbols-rounded">
            chat
            </span>
            </span>
            <span class="sidebar-text">Bulk SMS</span>
            </a>
            </li>

          </ul>
        </li>

                    <li class="nav-item pt-1">
                      <a href="/alllists" class="nav-link d-flex align-items-center text-truncate">
                        <span class="sidebar-icon">
                          <span class="material-symbols-rounded">
                            sell
                            </span>
                        </span>
                        <!--Sidebar nav text-->
                        <span class="sidebar-text">Contacts</span>
                      </a>
                    </li>   

        <li class="nav-item">
          <a class="nav-link d-flex align-items-center" href="Other/#multi-levelo" data-bs-toggle="collapse" aria-expanded="false">
            <div class="d-flex align-items-center">
              <span class="sidebar-icon">
                <span class="material-symbols-rounded">
                  layers
                  </span>
              </span>
              <span class="sidebar-text">Sender ID's</span>
            </div>
          </a>
     
<ul id="multi-levelo" class="collapse sidebar-dropdown list-unstyled mb-0">
  <li class="nav-item pt-1">
<a href="/alphatag"
class="nav-link d-flex align-items-center text-truncate ">
<span class="sidebar-icon">
<span class="material-symbols-rounded">
chat
</span>
</span>
<span class="sidebar-text">Alpha Tag</span>
</a>
</li>
<li class="nav-item pt-1">
  <a href="/purchaseno"
  class="nav-link d-flex align-items-center text-truncate ">
  <span class="sidebar-icon">
  <span class="material-symbols-rounded">
  chat
  </span>
  </span>
  <span class="sidebar-text">Purchase Numbers</span>
  </a>
  </li>
    <li class="nav-item pt-1">
      <a href="/verifyownnumber" class="nav-link d-flex align-items-center text-truncate">
        <span class="sidebar-icon">
          <span class="material-symbols-rounded">
            chat
            </span>
        </span>
        <!--Sidebar nav text-->
        <span class="sidebar-text">Verify Numbers</span>
      </a>
    </li>
</ul>
</li>


                    <li class="nav-item">
                      <a class="nav-link d-flex align-items-center" href="Other/#multi-level" data-bs-toggle="collapse" aria-expanded="false">
                        <div class="d-flex align-items-center">
                          <span class="sidebar-icon">
                            <span class="material-symbols-rounded">
                              layers
                              </span>
                          </span>
                          <span class="sidebar-text">Settings</span>
                        </div>
                      </a>
                 
            <ul id="multi-level" class="collapse sidebar-dropdown list-unstyled mb-0">
              <li class="nav-item pt-1">
            <a href="/sms/messages"
            class="nav-link d-flex align-items-center text-truncate ">
            <span class="sidebar-icon">
            <span class="material-symbols-rounded">
            chat
            </span>
            </span>
            <span class="sidebar-text">Messages List</span>
            </a>
            </li>
            <!-- <li class="nav-item pt-1">
              <a href="/buypackage/broughtpackage"
              class="nav-link d-flex align-items-center text-truncate ">
              <span class="sidebar-icon">
              <span class="material-symbols-rounded">
              chat
              </span>
              </span>
              <span class="sidebar-text">Brought Package</span>
              </a>
              </li> -->
              <li class="nav-item pt-1">
                <a href="/buypackage" class="nav-link d-flex align-items-center text-truncate">
                  <span class="sidebar-icon">
                    <span class="material-symbols-rounded">
                      chat
                      </span>
                  </span>
                  <!--Sidebar nav text-->
                  <span class="sidebar-text">Buy Package</span>
                </a>
              </li>
          </ul>
        </li>
                          
                            
              </ul>
            </nav>
            <!--aside-info-box-->

          </div>

        </div>
      </aside>
      
      <!--///////////Page Sidebar End///////////////-->

      <!--///Sidebar close button for 991px or below devices///-->

      <!--///.Sidebar close end///-->


      <script>
        // Ensure myDIV is displayed when the page loads
        document.addEventListener('DOMContentLoaded', function() {
            var x = document.getElementById("myDIV");
            var y = document.getElementById("myDIVA");
            x.style.display = "block"; // Make sure it's displayed initially
            y.classList.remove("mx-0"); // Ensure proper class
            y.classList.add("mx-4"); // Set padding
        });

        function myFunction() {
            var x = document.getElementById("myDIV");
            var y = document.getElementById("myDIVA");
            
            // Toggle display state
            if (x.style.display === "none" || x.style.display === "") {
                x.style.display = "block";
                y.classList.remove("mx-0");
                y.classList.add("mx-4");
            } else {
                x.style.display = "none";
                y.classList.remove("mx-4");
                y.classList.add("mx-0");
            }
        }

        // Function to check and toggle display every second
        function checkDisplay() {
            const x = document.getElementById("myDIV");
            const y = document.getElementById("myDIVA");

            // Check the display state and toggle if needed
            if (x.style.display === "none" || x.style.display === "") {
                x.style.display = "block"; // Make it visible
                y.classList.remove("mx-0"); // Remove no padding class
                y.classList.add("mx-4"); // Set padding
            }
        }

        // Set an interval to check every second (1000 milliseconds)
        setInterval(checkDisplay, 1000);
    </script>
      <!--///////////Page content wrapper///////////////-->
      <main class="page-content d-flex flex-column flex-row-fluid">

        <!--//page-header//-->
        <header class="navbar mb-3 px-3 px-lg-6 px-3 px-lg-6 align-items-center page-header navbar-expand navbar-light">

          <ul class="navbar-nav d-flex align-items-center h-100">
            <li class="nav-item d-none d-lg-flex flex-column h-100 me-2 align-items-center justify-content-center" data-tippy-placement="bottom-start" data-tippy-content="Toggle Sidebar">
              <a href="javascript:void(0)"
                class="sidebar-trigger nav-link size-40 d-flex align-items-center justify-content-center p-0" onclick="myFunction()">
                <span class="material-symbols-rounded">
                  menu_open
                  </span>
              </a>
            </li>

          </ul>
          <ul class="navbar-nav ms-auto d-flex align-items-center h-100">
              <li class="btn btn-light diabled active" role="button" aria-pressed="true">Package: <strong id="packagename">None</strong></li>
              <li class="mx-2 btn btn-light diabled active" role="button" aria-pressed="true">Remaining coin: <strong id="packagecoins">0</strong></li>
              <li class="nav-item d-flex align-items-center justify-content-center flex-column h-100 me-2">

                <label class="dark-mode-checkbox size-40 d-flex align-items-center justify-content-center nav-link p-0" for="ChangeTheme">
                  <input type="checkbox" id="ChangeTheme"/> <span class="slide"></span>
                  </label>
              </li>
          
            
            <li class="nav-item dropdown d-flex align-items-center justify-content-center flex-column h-100">
              <a href="#"
                 class="nav-link dropdown-toggle height-40 px-2 d-flex align-items-center justify-content-center"
                 aria-expanded="false" data-bs-toggle="dropdown" data-bs-auto-close="outside">
                  <div class="d-flex align-items-center">
                      <!--Avatar with status-->
                      <!-- <div class="avatar-status status-online me-sm-2 avatar xs">
                        <img src="/assets/media/avatars/default.jpg" class="rounded-circle img-fluid" alt="" id="userAvatar">
                    </div> -->
                      <span class="d-none d-md-inline-block" id="userName">Noah</span>
                  </div>
              </a>
              <div class="dropdown-menu mt-0 p-0 dropdown-menu-end overflow-hidden">
                <!--User meta-->
                <div class="position-relative overflow-hidden px-3 pt-4 pb-7 bg-gradient-primary text-white">
                    <svg style="transform: rotate(-180deg)" preserveAspectRatio="none"
                         class="position-absolute start-0 bottom-0 w-100 dropdown-wave" fill="currentColor" height="24"
                         viewBox="0 0 1200 120" xmlns="http://www.w3.org/2000/svg">
                        <path d="M0 0v46.29c47.79 22.2 103.59 32.17 158 28 70.36-5.37 136.33-33.31 206.8-37.5 73.84-4.36 147.54 16.88 218.2 35.26 69.27 18 138.3 24.88 209.4 13.08 36.15-6 69.85-17.84 104.45-29.34C989.49 25 1113-14.29 1200 52.47V0z" opacity=".25"/>
                        <path d="M0 0v15.81c13 21.11 27.64 41.05 47.69 56.24C99.41 111.27 165 111 224.58 91.58c31.15-10.15 60.09-26.07 89.67-39.8 40.92-19 84.73-46 130.83-49.67 36.26-2.85 70.9 9.42 98.6 31.56 31.77 25.39 62.32 62 103.63 73 40.44 10.79 81.35-6.69 119.13-24.28s75.16-39 116.92-43.05c59.73-5.85 113.28 22.88 168.9 38.84 30.2 8.66 59 6.17 87.09-7.5 22.43-10.89 48-26.93 60.65-49.24V0z" opacity=".5"/>
                        <path d="M0 0v5.63C149.93 59 314.09 71.32 475.83 42.57c43-7.64 84.23-20.12 127.61-26.46 59-8.63 112.48 12.24 165.56 35.4C827.93 77.22 886 95.24 951.2 90c86.53-7 172.46-45.71 248.8-84.81V0z"/>
                    </svg>
                    <div class="position-relative">
                        <h5 class="mb-1" id="userFullName">Noah Pierre</h5>
                    </div>
                </div>
            
                <!-- <div class="pt-2">
                    <a class="dropdown-item d-flex align-items-center" href="#" data-bs-toggle="modal" data-bs-target="#uploadModal">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="grey">
                                <path d="M260-160q-91 0-155.5-63T40-377q0-78 47-139t123-78q25-92 100-149t170-57q117 0 198.5 81.5T760-520q69 8 114.5 59.5T920-340q0 75-52.5 127.5T740-160H520q-33 0-56.5-23.5T440-240v-206l-64 62-56-56 160-160 160 160-56 56-64-62v206h220q42 0 71-29t29-71q0-42-29-71t-71-29h-60v-80q0-83-58.5-141.5T480-720q-83 0-141.5 58.5T280-520h-20q-58 0-99 41t-41 99q0 58 41 99t99 41h100v80H260Zm220-280Z"/>
                            </svg>
                        </div>
                        <span class="px-2">Upload Profile Pic</span>
                    </a>
                </div> -->
                <div class="pt-2">
                    <a class="dropdown-item d-flex align-items-center" href="/changepass">
                        <div>
                            <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 -960 960 960" width="24px" fill="grey">
                                <path d="M160-160v-80h110l-16-14q-52-46-73-105t-21-119q0-111 66.5-197.5T400-790v84q-72 26-116 88.5T240-478q0 45 17 87.5t53 78.5l10 10v-98h80v240H160Zm400-10v-84q72-26 116-88.5T720-482q0-45-17-87.5T650-648l-10-10v98h-80v-240h240v80H690l16 14q49 49 71.5 106.5T800-482q0 111-66.5 197.5T560-170Z"/>
                            </svg>
                        </div>
                        <span class="px-2">Change Password</span>
                    </a>
                </div>
                <div class="pt-2">
                    <a class="dropdown-item d-flex align-items-center">
                        <span class="material-symbols-rounded align-middle me-2 size-30 fs-5 d-flex align-items-center justify-content-center bg-warning text-white rounded-2">
                            logout
                        </span>
                        <button type="button" class="btn btn-light btn-sm active" data-bs-toggle="modal" data-bs-target="#exampleModal">
                            <span class="flex-grow-1">Logout</span>
                        </button>
                    </a>
                </div>
            </div>
          </li>
            <li
              class="nav-item dropdown ms-2 d-flex d-lg-none align-items-center justify-content-center flex-column h-100">
              <a href="javascript:void(0)"
                class="nav-link sidebar-trigger-lg-down size-40 p-0 d-flex align-items-center justify-content-center">
               <span class="material-symbols-rounded align-middle">menu</span>
              </a>
            </li>
          </ul>
        </header>
        <!--Main Header End-->

        <!-- <div class="modal fade" id="uploadModal" tabindex="-1" aria-labelledby="uploadModalLabel" aria-hidden="true">
          <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                  <div class="modal-header">
                      <h5 class="modal-title" id="uploadModalLabel">Upload Profile Picture</h5>
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                      <form id="uploadForm">
                          <div class="mb-3">
                              <label for="profilePic" class="form-label">Choose a profile picture</label>
                              <input type="file" class="form-control" id="profilePic" accept="image/*" required>
                          </div>
                          <button type="submit" class="btn btn-primary">Upload</button>
                      </form>
                  </div>
              </div>
          </div>
      </div>
       -->
      

        <!--Main Search Modal-->
        <!-- Modal -->
        <div class="modal" id="modal_search" tabindex="-1" aria-labelledby="modal_searchLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-body">
               <!--Search inner-->
        <div class="">

          <!--Search form-->
          <form>
            <div class="position-relative mb-4">
              <div class="text-muted">
                <span class="material-symbols-rounded position-absolute start-0 top-50 translate-middle-y ms-2">
                  search
                  </span>
              </div>
              <input type="text" autofocus class="form-control form-control-lg border-2 border-primary border ps-6"
                placeholder="Search App...">
            </div>
          </form>

          <!--Recently searched-->
          <div class="d-flex mb-2 align-items-center">
            <h6 class="d-block mb-0 me-3 flex-grow-1">
              <span class="material-symbols-rounded align-middle me-1 fs-5 opacity-50">
                history
                </span>
              Recent
            </h6>
            <a href="#!" class="small flex-shrink-0 d-block">Clear All</a>
          </div>
          <div class="list-group">
            <!--Recently searched item-->
            <a href="#" class="list-group-item px-3 d-flex overflow-hidden align-items-center list-group-item-action">
             <div class="flex-grow-1 overflow-hidden">
               <span class="text-truncate">Campaign reports</span>
             </div>
            </a>
            <!--Recently searched item-->
            <a href="#" class="list-group-item px-3 d-flex overflow-hidden align-items-center list-group-item-action">
              <div class="flex-grow-1 overflow-hidden">
                <span class="text-truncate">Funnel reports</span>
              </div>
             </a>
          </div>
        </div>
              </div>
              <div class="pt-0 border-top-0 modal-footer">
               <span class="small">Press ESC or 
               <span class="badge bg-secondary" role="button" data-bs-dismiss="modal">Click me</span> to close
               </span>
               
              </div>
            </div>
          </div>
        </div>


        <!--//Page Toolbar//-->
        <div class="toolbar px-3 px-lg-6 pt-3 pb-3">
          <div class="position-relative container-fluid px-0">
              <div class="row align-items-center position-relative">
                  <div class="col-sm-7 mb-3 mb-sm-0">
                    <h3 class="mb-2"><span id="greeting">Good afternoon</span> <span id="userGreeting">Noah</span>! 👋</h3>
                    <p class="mb-0">Here is your dashboard</p>
                  </div>
                  <div class="col-sm-5 text-md-end">
                      <div class="d-flex justify-content-sm-end align-items-center">
                          <a href="/sms/messages" data-tippy-placement="left" data-tippy-content="Reload Dashboard"
                             class="flex-shrink-0 ms-2 p-0 rounded-circle size-35 d-flex align-items-center justify-content-center btn btn-primary">
                              <span class="material-symbols-rounded lh-1 fs-4">
                                  refresh
                              </span>
                          </a>
                      </div>
                  </div>
              </div>
          </div>
      </div>

                  <!--//Page Toolbar//-->
                  <div class="toolbar pb-4 px-3 px-lg-6 pt-4 bg-body">
                      <div class="position-relative container-fluid px-0">
                          <div class="row align-items-center position-relative">
                              <div class="col-md-8 mb-4 mb-lg-0">
                                  <h3 class="mb-2">Send Bulk SMS</h3>


                              </div>
                          </div>
                      </div>
                  </div>
                  <!--//Page Toolbar End//-->
                  <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                    <div class="modal-dialog">
                      <div class="modal-content">
                          <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">Ready to Logout?</h5>
                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                          </div>
                          <div class="modal-body">
                              <div class="fs-5 py-4">
                                  <strong>Select "Logout" below if you are ready <br> to end your current session.</strong>
                              </div>
                          </div>
                          <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                              <button type="button" class="btn btn-danger"  id="logoutButton" data-bs-dismiss="modal">Logout</button>
                              <script>
                                // Function to reset the token
                                async function resetSession() {
                                    try {
                                        // To reset the token, you'd need to provide the current token in some way,
                                        // but since we're avoiding cookies and localStorage, this step may involve
                                        // a session or some other server-side mechanism to identify the token.
                                        await fetch('/reset-Session', {
                                            method: 'POST'
                                        });
                                    } catch (error) {
                                        console.error('Error resetting session:', error);
                                    }
                                }
                            
                                // Event listener for logout button click
                                document.getElementById('logoutButton').addEventListener('click', async () => {
                                    try {
                                        await resetSession();
                                        window.location.href = '/signin';
                                    } catch (error) {
                                        console.error('Error during logout:', error);
                                    }
                                });
                            
                                // Load user info when the window is loaded
                                window.addEventListener(loadUserInfo);
                            </script>
                            
                              
                          </div>
                      </div>
                  </div>
              </div><!-- Page Content -->
              <div class="content pt-5 px-4 px-lg-6 d-flex flex-column-fluid">
                <div class="container p-5">
                  <div id="toastContainer" class="position-fixed bottom-0 end-0 p-3" style="z-index: 1055;"></div>

                    <h2 class="mb-4 text-center">Send SMS to Selected List Numbers</h2>
                    <!-- Table to display lists -->
                    <form id="phoneCodeForm">
                        <div class="form-group mb-4">
                            <textarea id="additionalInfo" name="message" rows="5" class="form-control" placeholder="Type your message here" required></textarea>
                        </div>
                    </form>
        <!-- Contact List Table -->
        <div class="table-responsive">
          <table class="table table-striped table-hover table-bordered mt-2">
              <thead class="table-dark">
                  <tr>
                      <th>List Name</th>
                      <th>Contacts Count</th>
                      <th>Actions</th>
                  </tr>
              </thead>
              <tbody id="contactListTableBody">
                  <!-- Rows will be populated by JavaScript -->
              </tbody>
          </table>
      </div>
    </div>
  </div>

<div class="content pt-2 px-4 px-lg-6 d-flex flex-column-fluid">
  <div class="container p-5">
    <h2 class="mb-4 text-center">SMS Campaigns</h2>

          <table class="table table-hover table-bordered">
            <thead class="thead-dark bg-dark text-white">
              <tr>
                <th>Campaign ID</th>
                <th>Name</th>
                <th>From</th>
                <th>Message</th>
                <th>Schedule</th>
                <th>Status</th>
                <th>Date Added</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="campaignTableBody">
              <!-- Dynamic Rows will be inserted here -->
            </tbody>
          </table>
        </div>
      </div>


<!-- Modal Structure -->
<div class="modal fade" id="sendSmsModal" tabindex="-1" aria-labelledby="sendSmsModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="sendSmsModalLabel">Send SMS</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form id="modalForm">
          <div class="mb-3">
            <label for="campaignName" class="form-label">Campaign Name</label>
            <input type="text" class="form-control" id="campaignName" placeholder="Enter Campaign Name" required>
          </div>

          <div class="mb-3">
            <label for="senderIdDropdown" class="form-label">Sender ID</label>
            <select id="senderIdDropdown" class="form-select" required>
              <option value="" selected>Select Sender ID</option>
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label">Send Option</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="sendOption" id="sendNow" value="now" checked>
              <label class="form-check-label" for="sendNow">Now</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="sendOption" id="sendLater" value="schedule">
              <label class="form-check-label" for="sendLater">Later</label>
            </div>
          </div>

          <div id="scheduleSection" class="mb-3" style="display: none;">
            <label class="form-label">Select Date & Time</label>
            <div class="row">
              <div class="col">
                <input type="date" class="form-control" id="scheduleDate" required>
              </div>
              <div class="col">
                <div class="input-group">
                  <input type="text" class="form-control" id="scheduleTime" placeholder="HH:mm" required>
                </div>
              </div>
            </div>
          </div>
        </form>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" id="modalSendBtn">Send</button>
      </div>
    </div>
  </div>
</div>





<script>
  document.addEventListener('DOMContentLoaded', async () => {
      let selectedListId = null; // Store selected listId globally
      let userId = null; // Store the userId globally
  
      // Fetch profile picture and handle errors
      // fetch('/profile-pic')
      //     .then(response => {
      //         if (!response.ok) {
      //             throw new Error(`Failed to fetch profile picture. Status: ${response.status}`);
      //         }
      //         return response.json();
      //     })
      //     .then(data => {
      //         const imgElement = document.getElementById('userAvatar');
      //         imgElement.src = data.fileUrl; // Update the src attribute with the fetched URL
      //     })
      //     .catch(error => {
      //         console.error('Error:', error.message);
      //         const imgElement = document.getElementById('userAvatar');
      //         imgElement.src = '/assets/media/avatars/default.jpg'; // Path to default avatar
      //         showToast('Failed to load profile picture. Default image used.', false);
      //     });
  
      try {
          // Fetch user data
          const response = await fetch('/user', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({}) // Adjust payload if necessary
          });
  
          if (!response.ok) {
              throw new Error(`Failed to fetch user data. Status: ${response.status}`);
          }
  
          const data = await response.json();
          if (data) {
              document.getElementById('userName').textContent = data.Name;
              document.getElementById('userFullName').textContent = data.Name;
              document.getElementById('userGreeting').textContent = data.Name;
              document.getElementById('packagename').textContent = data.PackageName;
              document.getElementById('packagecoins').textContent = data.Coins;
          }
  
          // Update greeting message based on time of day
          updateGreeting();
  
      } catch (error) {
          console.error('Error fetching user data:', error);
          showToast(`Error loading user details: ${error.message}`, false);
      }
  
      // Fetch and display campaigns
      try {
          const response = await fetch('/view_campaigns', {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' }
          });
  
          if (!response.ok) throw new Error(`Failed to fetch campaigns. Status: ${response.status}`);
  
          const result = await response.json();
          const campaigns = result.data || [];
  
          const campaignTableBody = document.getElementById('campaignTableBody');
          campaignTableBody.innerHTML = ''; // Clear existing rows
  
          campaigns.forEach(campaign => {
              const dateAdded = new Date(campaign.date_added * 1000).toLocaleString();
              const schedule = new Date(campaign.schedule * 1000).toLocaleString();
  
              const row = document.createElement('tr');
              row.innerHTML = `
                  <td>${campaign.sms_campaign_id}</td>
                  <td>${campaign.name}</td>
                  <td>${campaign.from}</td>
                  <td>${campaign.body}</td>
                  <td>${schedule}</td>
                  <td>${campaign.status}</td>
                  <td>${dateAdded}</td>
                  <td>
                      <button class="btn btn-success btn-sm" onclick="updateCampaign(${campaign.sms_campaign_id})">Update</button>
                      <button class="btn btn-danger btn-sm" onclick="cancelCampaign(${campaign.sms_campaign_id})">Cancel</button>
                  </td>
              `;
              campaignTableBody.appendChild(row);
          });
  
      } catch (error) {
          console.error('Error fetching campaigns:', error);
          showToast(`Failed to load campaigns: ${error.message}`, false);
      }
  
      // Fetch contact lists
      async function fetchContactLists() {
          try {
              const response = await fetch('/getlist', {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' }
              });
  
              if (!response.ok) {
                  throw new Error(`Failed to fetch contact lists. Status: ${response.status}`);
              }
  
              const data = await response.json();
              const contactListTableBody = document.getElementById('contactListTableBody');
              contactListTableBody.innerHTML = ''; // Clear existing rows
  
              const clickSendLists = data.clickSendLists?.data?.data || [];
              clickSendLists.forEach(list => {
                  const row = document.createElement('tr');
                  row.innerHTML = `
                      <td>${list.list_name}</td>
                      <td>${list._contacts_count || 0}</td>
                      <td>
                          <button class="btn btn-dark btn-sm" type="button" onmouseover="selectList('${list.list_id}')" onclick="sendMessage('${list.list_id}')">Send</button>
                      </td>
                  `;
                  contactListTableBody.appendChild(row);
              });
  
              showToast('Contact lists fetched successfully!', true);
  
          } catch (error) {
              console.error('Error fetching contact lists:', error);
              showToast(`Error loading contact lists: ${error.message}`, false);
          }
      }
  
      fetchContactLists();
  });

  document.querySelectorAll('input[name="sendOption"]').forEach((radio) => {
      radio.addEventListener('change', (event) => {
          const scheduleSection = document.getElementById('scheduleSection');
          scheduleSection.style.display = event.target.value === 'schedule' ? 'block' : 'none';
      });
  });

  // Function to set selectedListId when a list is selected
  function selectList(listId) {
      selectedListId = listId; // Set the selected list ID
      console.log(selectList)
  }

  // Function to send message data to '/sms/bulksms'
  async function sendMessage(listId) {
      console.log('sendMessage triggered with:', listId);

      // Ensure selectedListId is set
      if (!selectedListId) {
          showToast('Please select a contact list before sending.', false);
          return;
      }

      // Fetch sender IDs
      try {
          const response = await fetch('/alphatags');
          if (!response.ok) throw new Error(`HTTP error! Status: ${response.status}`);

          const alphaTagData = await response.json();
          const senderIdDropdown = document.getElementById('senderIdDropdown');
          senderIdDropdown.innerHTML = ''; // Clear existing options

          if (alphaTagData.length > 0) {
              alphaTagData.forEach(tag => {
                  const option = document.createElement('option');
                  option.value = tag.senderId;
                  option.textContent = tag.tagname;
                  senderIdDropdown.appendChild(option);
              });
          } else {
              const defaultOption = document.createElement('option');
              defaultOption.value = "";
              defaultOption.textContent = "No Sender ID Available";
              defaultOption.disabled = true;
              senderIdDropdown.appendChild(defaultOption);
          }
      } catch (error) {
          console.error('Error fetching AlphaTags:', error);
          showToast('Error fetching sender IDs: ' + error.message, false); // Show error message
      }

      const sendSmsModal = new bootstrap.Modal(document.getElementById('sendSmsModal'));
      sendSmsModal.show();
  }

  document.getElementById('modalSendBtn').addEventListener('click', () => {
      const campaignName = document.getElementById('campaignName').value.trim();
      const senderId = document.getElementById('senderIdDropdown').value;
      const sendOption = document.querySelector('input[name="sendOption"]:checked').value;

      // Fetch message from the input field (assuming it exists)
      const message = document.getElementById('additionalInfo').value.trim(); // Update with the correct input field ID

      // Validate fields
      if (!campaignName) {
          showToast('Campaign name is required.', false);
          return;
      }
      if (!senderId) {
          showToast('Sender ID is required.', false);
          return;
      }
      if (!message) {
          showToast('Message is required.', false);
          return;
      }

      // Prepare schedule timestamp if scheduling is selected
      let scheduleTimestamp = null;
      if (sendOption === 'schedule') {
          const scheduleDate = document.getElementById('scheduleDate').value;
          const scheduleTime = document.getElementById('scheduleTime').value;

          if (!scheduleDate || !scheduleTime) {
              showToast('Please select both date and time for scheduling.', false);
              return;
          }

          // Combine date and time into a timestamp
          scheduleTimestamp = new Date(`${scheduleDate}T${scheduleTime}`).getTime() / 1000; // Convert to UNIX timestamp (seconds)
      }

      // Create the payload matching CampaignPayload interface
      const payload = {
          list_id: selectedListId,
          name: campaignName,
          body: message,
          from: senderId,
          schedule: scheduleTimestamp || undefined, // Include only if scheduled
      };

      console.log('Payload:', payload);

      // Send the payload to the server
      fetch('/bulksms', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(payload),
      })
      .then(response => response.json())
      .then(data => {
          if (data.success) {
              showToast('Message sent successfully!', true);
          } else {
              showToast('Failed to send message: ' + data.message, false);
          }
      })
      .catch(error => {
          console.error('Error sending message:', error);
          showToast('Error sending message: ' + error.message, false);
      });
  });

  // Function to show toast notifications
  function showToast(message, isSuccess) {
                    const toastElement = document.createElement('div');
                    toastElement.className = `toast align-items-center text-white ${isSuccess ? 'bg-success' : 'bg-danger'} border-0`;
                    toastElement.role = 'alert';
                    toastElement.innerHTML = `
                        <div class="d-flex">
                            <div class="toast-body">
                                ${message}
                            </div>
                            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
                        </div>
                    `;
            
                    // Append the toast to the toast container
                    document.getElementById('toastContainer').appendChild(toastElement);
            
                    const toast = new bootstrap.Toast(toastElement);
                    toast.show();
            
                    // Remove the toast after it's hidden to avoid cluttering the DOM
                    toastElement.addEventListener('hidden.bs.toast', () => {
                        toastElement.remove();
                    });
                }
  // Function to update greeting based on time of day
  function updateGreeting() {
      const hours = new Date().getHours();
      const greetingMessage = (hours < 12) ? 'Good Morning' :
                              (hours < 18) ? 'Good Afternoon' : 'Good Evening';
      document.getElementById('userGreeting').innerText = greetingMessage + ', ' + document.getElementById('userName').innerText;
  }
</script>





  

            

                    <!--//Page content End//-->
            <!--//Page-footer//-->
 <footer class="pb-3 pb-lg-5 px-3 px-lg-6">
    <div class="container-fluid px-0">
      <span class="d-block lh-sm small text-muted text-end">&copy;
        <script>
          document.write(new Date().getFullYear())
        </script>. Copyright
      </span>
    </div>
  </footer>
  <!--/.Page Footer End-->

                </main>
                <!--///////////Page content wrapper End///////////////-->
            </div>
        </div>

<!--////////////Theme Core scripts Start/////////////////-->
<script src="/assets/js/theme.bundle.js"></script>

<!--////////////Theme Core scripts End/////////////////-->

    </body>

</html>
